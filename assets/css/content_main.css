/*
 * Neso Typography CSS
 * 
 * This is a modified version of Tailwind CSS Typography plugin, optimized for Hugo content.
 * Copyright (c) Tailwind Labs, Inc.
 * Licensed under MIT (https://github.com/tailwindlabs/tailwindcss-typography/blob/main/LICENSE)
 * 
 * Copyright (c) 2025 babeneso
 * Licensed under MIT (https://github.com/babeneso/hugo-neso/blob/main/LICENSE)
 */



/* ====== Theme & base styles ====== */

--neso-cnt-headings:      var(--color-neso-fg1);
--neso-cnt-links:         var(--color-neso-fg1);
--neso-cnt-links-deco:    --alpha(var(--color-neso-accent) / 64%);
--neso-cnt-links-focus:   var(--color-neso-splash);
--neso-cnt-bold:          var(--color-neso-fg1);
--neso-cnt-kbd:           var(--color-neso-fg1);
--neso-cnt-kbd-shadows:   var(--color-neso-deco2);
--neso-cnt-code:          var(--color-neso-fg1);

--neso-cnt-body:          var(--color-neso-fg2);
--neso-cnt-quotes:        var(--color-neso-fg2);

--neso-cnt-lead:          var(--color-neso-fg3);
--neso-cnt-counters:      var(--color-neso-fg3);
--neso-cnt-captions:      var(--color-neso-fg3);

--neso-cnt-pre-code:      var(--color-neso-bg3); /* inverse */
--neso-cnt-pre-bg:        var(--color-neso-fg2); /* inverse */

--neso-cnt-bullets:       var(--color-neso-deco1);
--neso-cnt-th-borders:    var(--color-neso-deco2);
--neso-cnt-quote-borders: var(--color-neso-deco2);

--neso-cnt-hr:            var(--color-neso-deco3);
--neso-cnt-td-borders:    var(--color-neso-deco3);


color: var(--neso-cnt-body);
font-size: 1rem;
line-height: 1.8;
font-weight: 400;

@variant lg {
    font-size: 1.125rem;
    line-height: 1.625;
}


/* ------ text variations ------ */

:where(
    a
        ):not(:where(
        [class~="cnt-undo"], [class~="cnt-undo"] *)
    ) {
    color: var(--neso-cnt-links);
    text-decoration: underline;
    text-decoration-color: var(--neso-cnt-links-deco);
    font-weight: 500;
    }

:where(
    a:hover,
    a:focus-visible,
    a:active
        ):not(:where(
        [class~="cnt-undo"], [class~="cnt-undo"] *)
    ) {
    color: var(--neso-cnt-links-focus);
    }

:where(
    strong
        ):not(:where(
        [class~="cnt-undo"], [class~="cnt-undo"] *)
    ) {
    color: var(--neso-cnt-bold);
    font-weight: 600;
    }

:where(
    a strong,
    blockquote strong,
    thead th strong
        ):not(:where(
        [class~="cnt-undo"], [class~="cnt-undo"] *)
    ) {
    color: inherit;
    }

/* ------ paragraphs ------ */

:where(
    p
        ):not(:where(
        [class~="cnt-undo"], [class~="cnt-undo"] *)
    ) {
    margin-top: 1.25em;            /* 20/r16 */
    margin-bottom: 1.25em;         /* 20/r16 */
    }

:where(
    [class~="lead"]
        ):not(:where(
        [class~="cnt-undo"], [class~="cnt-undo"] *)
    ) {
    color: var(--neso-cnt-lead);
    font-size: 1.25em;             /* 20/r16 */
    line-height: 1.6;              /* 32/e20 */
    margin-top: 1.2em;             /* 24/e20 */
    margin-bottom: 1.2em;          /* 24/e20 */
    }

:where(
    blockquote
        ):not(:where(
        [class~="cnt-undo"], [class~="cnt-undo"] *)
    ) {
    margin-top: 2em;               /* 32/r16 */
    margin-bottom: 2em;            /* 32/r16 */
    padding-inline-start: 1.25em;  /* 20/r16 */
    font-style: italic;
    color: var(--neso-cnt-quotes);
    border-inline-start-width: .25rem;
    border-inline-start-color: var(--neso-cnt-quote-borders);
    quotes: "“" "”" "‘" "’";
    }

:where(
    :lang(zh) blockquote
        ):not(:where(
        [class~="cnt-undo"], [class~="cnt-undo"] *)
    ) {
    quotes: "「" "」" "『" "』";
    }

:where(
    blockquote p:first-of-type
        ):not(:where(
        [class~="cnt-undo"], [class~="cnt-undo"] *)
    )::before {
    content: open-quote;
    }

:where(
    blockquote p:last-of-type
        ):not(:where(
        [class~="cnt-undo"], [class~="cnt-undo"] *)
    )::after {
    content: close-quote;
    }

:where(
    blockquote footer
        ):not(:where(
        [class~="cnt-undo"], [class~="cnt-undo"] *)
    ) {
    font-size: .875em;     /* 14/r16 */
    font-style: normal;
    quotes: none;
    }


/* ------ headings ------ */

:where(
    h1
        ):not(:where(
        [class~="cnt-undo"], [class~="cnt-undo"] *)
    ) {
    color: var(--neso-cnt-headings);
    font-weight: 800;
    font-size: 2em;        /* 32/r16 */
    line-height: 1.125;    /* 36/e32 */
    margin-top: 0;
    margin-bottom: .875em; /* 28/e32 */
    }

:where(
    h2
        ):not(:where(
        [class~="cnt-undo"], [class~="cnt-undo"] *)
    ) {
    color: var(--neso-cnt-headings);
    font-weight: 700;
    font-size: 1.5em;      /* 24/r16 */
    line-height: 1.33333;  /* 32/e24 */
    margin-top: 2em;       /* 48/e24 */
    margin-bottom: 1em;    /* 24/e24 */
    }

:where(
    h3
        ):not(:where(
        [class~="cnt-undo"], [class~="cnt-undo"] *)
    ) {
    color: var(--neso-cnt-headings);
    font-weight: 600;
    font-size: 1.25em;     /* 20/r16 */
    line-height: 1.6;      /* 32/e20 */
    margin-top: 1.6em;     /* 32/e20 */
    margin-bottom: .6em;   /* 12/e20 */
    }

:where(
    h4
        ):not(:where(
        [class~="cnt-undo"], [class~="cnt-undo"] *)
    ) {
    color: var(--neso-cnt-headings);
    font-weight: 600;
    line-height: 1.5;      /* 24/r16 */
    margin-top: 1.5em;     /* 24/r16 */
    margin-bottom: .5em;   /*  8/r16 */
    }

:where(
    h1 strong
        ):not(:where(
        [class~="cnt-undo"], [class~="cnt-undo"] *)
    ) {
    font-weight: 900;
    color: inherit;
    }

:where(
    h2 strong
        ):not(:where(
        [class~="cnt-undo"], [class~="cnt-undo"] *)
    ) {
    font-weight: 800;
    color: inherit;
    }

:where(
    h3 strong
        ):not(:where(
        [class~="cnt-undo"], [class~="cnt-undo"] *)
    ) {
    font-weight: 700;
    color: inherit;
    }

:where(
    h4 strong
        ):not(:where(
        [class~="cnt-undo"], [class~="cnt-undo"] *)
    ) {
    font-weight: 700;
    color: inherit;
    }

:where(
    h2 + *,
    h3 + *,
    h4 + *
        ):not(:where(
        [class~="cnt-undo"], [class~="cnt-undo"] *)
    ) {
    margin-top: 0;
    }


/* ------ images ------ */

:where(
    img
        ):not(:where(
        [class~="cnt-undo"], [class~="cnt-undo"] *)
    ) {
    margin-top: 2em;       /* 32/r16 */
    margin-bottom: 2em;    /* 32/r16 */
    }

:where(
    picture
        ):not(:where(
        [class~="cnt-undo"], [class~="cnt-undo"] *)
    ) {
    margin-top: 2em;       /* 32/r16 */
    margin-bottom: 2em;    /* 32/r16 */
    display: block;
    }

:where(
    video
        ):not(:where(
        [class~="cnt-undo"], [class~="cnt-undo"] *)
    ) {
    margin-top: 2em;       /* 32/r16 */
    margin-bottom: 2em;    /* 32/r16 */
    }

:where(
    picture > img
        ):not(:where(
        [class~="cnt-undo"], [class~="cnt-undo"] *)
    ) {
    margin-top: 0;
    margin-bottom: 0;
    }

:where(
    figure
        ):not(:where(
        [class~="cnt-undo"], [class~="cnt-undo"] *)
    ) {
    margin-top: 2em;       /* 32/r16 */
    margin-bottom: 2em;    /* 32/r16 */
    }

:where(
    img[src*="#center"],
    picture[src*="#center"],
    video[src*="#center"],
    figure[src*="#center"]
        ):not(:where(
        [class~="cnt-undo"], [class~="cnt-undo"] *)
    ) {
    margin-inline: auto;
    }

:where(
    figure > *,
    figure img
        ):not(:where(
        [class~="cnt-undo"], [class~="cnt-undo"] *)
    ) {
    margin-top: 0;
    margin-bottom: 0;
    margin-inline: auto;
    }

:where(
    figcaption
        ):not(:where(
        [class~="cnt-undo"], [class~="cnt-undo"] *)
    ) {
    color: var(--neso-cnt-captions);
    font-size: .875em;     /* 14/r16 */
    line-height: 1.42857;  /* 20/e14 */
    margin-top: .85714em;  /* 12/e14 */
    text-align: center;
    }


/* ------ kbd / code / pre ------ */

:where(
    kbd
        ):not(:where(
        [class~="cnt-undo"], [class~="cnt-undo"] *)
    ) {
    font-weight: 500;
    font-family: inherit;
    color: var(--neso-cnt-kbd);
    font-size: .875em;                 /* 14/r16 */
    border-radius: .3125rem;           /*  5/r16 */
    padding-top: .21429em;             /*  3/e14 */
    padding-inline-end: .42857em;      /*  6/e14 */
    padding-bottom: .21429em;          /*  3/e14 */
    padding-inline-start: .42857em;    /*  6/e14 */
    box-shadow:
    0 0 0 1px var(--neso-cnt-kbd-shadows),
    0 3px 0 var(--neso-cnt-kbd-shadows);
    }

/* single backtick, no chroma */
:where(
    code
        ):not(:where(
        [class~="cnt-undo"], [class~="cnt-undo"] *,
        [class~="highlight"] *)
    ) {
    color: var(--neso-cnt-code);
    font-weight: 600;
    font-size: .875em;     /* 14/r16 */
    overflow-wrap: break-word;
    }

:where(
    code
        ):not(:where(
        [class~="cnt-undo"], [class~="cnt-undo"] *,
        [class~="highlight"] *)
    )::before,
:where(
    code
        ):not(:where(
        [class~="cnt-undo"], [class~="cnt-undo"] *,
        [class~="highlight"] *)
    )::after {
    content: "`";
    color: var(--neso-cnt-counters);
    }

:where(
    a code
        ):not(:where(
        [class~="cnt-undo"], [class~="cnt-undo"] *)
    ) {
    color: inherit;
    }

:where(
    h1 code
        ):not(:where(
        [class~="cnt-undo"], [class~="cnt-undo"] *)
    ) {
    color: inherit;
    }

:where(
    h2 code
        ):not(:where(
        [class~="cnt-undo"], [class~="cnt-undo"] *)
    ) {
    color: inherit;
    font-size: .875em;     /* 21/e24 */
    }

:where(
    h3 code
        ):not(:where(
        [class~="cnt-undo"], [class~="cnt-undo"] *)
    ) {
    color: inherit;
    font-size: .9em;       /* 18/e20 */
    }

:where(
    h4 code
        ):not(:where(
        [class~="cnt-undo"], [class~="cnt-undo"] *)
    ) {
    color: inherit;
    }

:where(
    blockquote code
        ):not(:where(
        [class~="cnt-undo"], [class~="cnt-undo"] *)
    ) {
    color: inherit;
    }

:where(
    thead th code
        ):not(:where(
        [class~="cnt-undo"], [class~="cnt-undo"] *)
    ) {
    color: inherit;
    }

:where(
    pre
        ):not(:where(
        [class~="cnt-undo"], [class~="cnt-undo"] *,
        [class~="highlight"] *)
    ) {
    position: relative;
    color: var(--neso-cnt-pre-code);
    background-color: var(--neso-cnt-pre-bg);
    font-weight: 400;
    font-size: .8em;           /* 12.8/r16   */
    line-height: 1.71875;      /* 22  /e12.8 */
    border-radius: .375rem;    /*  6  /r16   */
    margin-top: 2.5em;         /* 32  /e12.8 */
    margin-bottom: 2.5em;      /* 32  /e12.8 */
    }

/* triple backtick or indented, no chroma */
:where(
    pre code
        ):not(:where(
        [class~="cnt-undo"], [class~="cnt-undo"] *,
        [class~="highlight"] *)
    ) {
    background-color: transparent;
    border-width: 0;
    border-radius: 0;
    display: block;
    width: 100%;
    overflow-x: auto;
    padding-top: .9375em;          /* 12/e12.8 */
    padding-bottom: .9375em;       /* 12/e12.8 */
    padding-inline-start: 1.25em;  /* 16/e12.8 */
    padding-inline-end: 1.25em;    /* 16/e12.8 */
    font-weight: inherit;
    color: inherit;
    font-size: inherit;
    font-family: inherit;
    line-height: inherit;
    }
  
:where(
    pre code
        ):not(:where(
        [class~="cnt-undo"], [class~="cnt-undo"] *)
    )::before,
:where(
    pre code
        ):not(:where(
        [class~="cnt-undo"], [class~="cnt-undo"] *)
    )::after {
    content: none;
    }


/* ------ lists ------ */

:where(
    ol
        ):not(:where(
        [class~="cnt-undo"], [class~="cnt-undo"] *)
    ) {
    list-style-type: decimal;
    }

:where(
    ul
        ):not(:where(
        [class~="cnt-undo"], [class~="cnt-undo"] *)
    ) {
    list-style-type: disc;
    }

:where(
    ol[type="A"],
    ol[type="A" s]
        ):not(:where(
        [class~="cnt-undo"], [class~="cnt-undo"] *)
    ) {
    list-style-type: upper-alpha;
    }

:where(
    ol[type="a"],
    ol[type="a" s]
        ):not(:where(
        [class~="cnt-undo"], [class~="cnt-undo"] *)
    ) {
    list-style-type: lower-alpha;
    }

:where(
    ol[type="I"],
    ol[type="I" s]
        ):not(:where(
        [class~="cnt-undo"], [class~="cnt-undo"] *)
    ) {
    list-style-type: upper-roman;
    }

:where(
    ol[type="i"],
    ol[type="i" s]
        ):not(:where(
        [class~="cnt-undo"], [class~="cnt-undo"] *)
    ) {
    list-style-type: lower-roman;
    }

:where(
    ol[type="1"]
        ):not(:where(
        [class~="cnt-undo"], [class~="cnt-undo"] *)
    ) {
    list-style-type: decimal;
    }

:where(
    ol, ul
        ):not(:where(
        [class~="cnt-undo"], [class~="cnt-undo"] *)
    ) {
    margin-top: 1.25em;            /* 20/r16 */
    margin-bottom: 1.25em;         /* 20/r16 */
    padding-inline-start: 1.625em; /* 26/r16 */ /* (26+6=32) */
    }

:where(
    li
        ):not(:where(
        [class~="cnt-undo"], [class~="cnt-undo"] *)
    ) {
    margin-top: .5em;              /* 8/r16 */
    margin-bottom: .5em;           /* 8/r16 */
    }

:where(
    ol > li
        ):not(:where(
        [class~="cnt-undo"], [class~="cnt-undo"] *)
    ) {
    padding-inline-start: .375em;  /* 6/r16 */
    }

:where(
    ul > li
        ):not(:where(
        [class~="cnt-undo"], [class~="cnt-undo"] *)
    ) {
    padding-inline-start: .375em;  /* 6/r16 */
    }

> :where(ul, ol)
> :where(li)
:where(
    p
        ):not(:where(
        [class~="cnt-undo"], [class~="cnt-undo"] *)
    ) {
    margin-top: .75em;         /* 12/r16 */
    margin-bottom: .75em;      /* 12/r16 */
    }

> :where(ul, ol)
> :where(li)
> :where(
    p:first-child
        ):not(:where(
        [class~="cnt-undo"], [class~="cnt-undo"] *)
    ) {
    margin-top: 1.25em;        /* 20/r16 */
    }

> :where(ul, ol)
> :where(li)
> :where(
    p:last-child
        ):not(:where(
        [class~="cnt-undo"], [class~="cnt-undo"] *)
    ) {
    margin-bottom: 1.25em;     /* 20/r16 */
    }

> :where(ul, ol)
> :where(li)
:where(
    pre
        ):not(:where(
        [class~="cnt-undo"], [class~="cnt-undo"] *,
        [class~="highlight"] *)
    ) {
    margin-top: .9375em;       /* 12/e12.8 */
    margin-bottom: .9375em;    /* 12/e12.8 */
    }

> :where(ul, ol)
> :where(li)
> :where(
    pre:first-child
        ):not(:where(
        [class~="cnt-undo"], [class~="cnt-undo"] *,
        [class~="highlight"] *)
    ) {
    margin-top: 1.5625em;      /* 20/e12.8 */
    }

> :where(ul, ol)
> :where(li)
> :where(
    pre:last-child
        ):not(:where(
        [class~="cnt-undo"], [class~="cnt-undo"] *,
        [class~="highlight"] *)
    ) {
    margin-bottom: 1.5625em;   /* 20/e12.8 */
    }

:where(
    ul ul,
    ul ol,
    ol ul,
    ol ol
        ):not(:where(
        [class~="cnt-undo"], [class~="cnt-undo"] *)
    ) {
    margin-top: .75em;         /* 12/r16 */
    margin-bottom: .75em;      /* 12/r16 */
    }

:where(
    ol > li
        ):not(:where(
        [class~="cnt-undo"], [class~="cnt-undo"] *)
    )::marker {
    font-weight: 400;
    color: var(--neso-cnt-counters);
    }

:where(
    ul > li
        ):not(:where(
        [class~="cnt-undo"], [class~="cnt-undo"] *)
    )::marker {
    color: var(--neso-cnt-bullets);
    }

:where(
    dl
        ):not(:where(
        [class~="cnt-undo"], [class~="cnt-undo"] *)
    ) {
    margin-top: 1.25em;        /* 20/r16 */
    margin-bottom: 1.25em;     /* 20/r16 */
    }

:where(
    dt
        ):not(:where(
        [class~="cnt-undo"], [class~="cnt-undo"] *)
    ) { 
    color: var(--neso-cnt-headings);
    font-weight: 600;
    margin-top: 1.25em;        /* 20/r16 */
    }

:where(
    dd
        ):not(:where(
        [class~="cnt-undo"], [class~="cnt-undo"] *)
    ) {
    margin-top: .5em;              /* 8/r16 */
    padding-inline-start: 1.625em; /* 26/r16 */ /* (26+6=32) */
    }


/* ------ horizontal rules ------ */

:where(
    hr
        ):not(:where(
        [class~="cnt-undo"], [class~="cnt-undo"] *)
    ) {
    margin-top: 3em;       /* 48/r16 */
    margin-bottom: 3em;    /* 48/r16 */
    border-top-width: 1px;
    border-color: var(--neso-cnt-hr);
    }

:where(
    hr + *
        ):not(:where(
        [class~="cnt-undo"], [class~="cnt-undo"] *)
    ) {
    margin-top: 0;
    }


/* ------ tables ------ */

:where(
    table
        ):not(:where(
        [class~="cnt-undo"], [class~="cnt-undo"] *,
        [class~="highlight"] *)
    ) {
    width: 100%;
    table-layout: auto;
    font-size: .875em;         /* 14/r16 */
    line-height: 1.71429;      /* 24/e14 */
    margin-top: 2.28571em;     /* 32/e14 */
    margin-bottom: 2.28571em;  /* 32/e14 */
    }

:where(
    thead
        ):not(:where(
        [class~="cnt-undo"], [class~="cnt-undo"] *)
    ) {
    border-bottom-width: 2px;
    border-bottom-color: var(--neso-cnt-th-borders);
    }

:where(
    thead th
        ):not(:where(
        [class~="cnt-undo"], [class~="cnt-undo"] *)
    ) {
    color: var(--neso-cnt-headings);
    font-weight: 600;
    vertical-align: bottom;
    padding-inline-start: .57143em;   /* 8/e14 */
    padding-inline-end: .57143em;     /* 8/e14 */
    padding-bottom: .57143em;         /* 8/e14 */
    }

:where(
    thead th:first-child
        ):not(:where(
        [class~="cnt-undo"], [class~="cnt-undo"] *)
    ) {
    padding-inline-start: 0;
    }

:where(
    thead th:last-child
        ):not(:where(
        [class~="cnt-undo"], [class~="cnt-undo"] *)
    ) {
    padding-inline-end: 0;
    }

:where(
    tbody tr
        ):not(:where(
        [class~="cnt-undo"], [class~="cnt-undo"] *,
        [class~="highlight"] *)
    ) {
    border-bottom-width: 1px;
    border-bottom-color: var(--neso-cnt-td-borders);
    }

:where(
    tbody tr:last-child
        ):not(:where(
        [class~="cnt-undo"], [class~="cnt-undo"] *,
        [class~="highlight"] *)
    ) {
    border-bottom-width: 0;
    }

:where(
    tbody td
        ):not(:where(
        [class~="cnt-undo"], [class~="cnt-undo"] *,
        [class~="highlight"] *)
    ) {
    vertical-align: baseline;
    }

:where(
    tfoot
        ):not(:where(
        [class~="cnt-undo"], [class~="cnt-undo"] *)
    ) {
    border-top-width: 1px;
    border-top-color: var(--neso-cnt-th-borders);
    }

:where(
    tfoot td
        ):not(:where(
        [class~="cnt-undo"], [class~="cnt-undo"] *)
    ) {
    vertical-align: top;
    }

:where(
    tbody td,
    tfoot td
        ):not(:where(
        [class~="cnt-undo"], [class~="cnt-undo"] *,
        [class~="highlight"] *)
    ) {
    padding-top: .57143em;            /* 8/e14 */
    padding-inline-end: .57143em;     /* 8/e14 */
    padding-bottom: .57143em;         /* 8/e14 */
    padding-inline-start: .57143em;   /* 8/e14 */
    }

:where(
    tbody td:first-child,
    tfoot td:first-child
        ):not(:where(
        [class~="cnt-undo"], [class~="cnt-undo"] *,
        [class~="highlight"] *)
    ) {
    padding-inline-start: 0;
    }

:where(
    tbody td:last-child,
    tfoot td:last-child
        ):not(:where(
        [class~="cnt-undo"], [class~="cnt-undo"] *,
        [class~="highlight"] *)
    ) {
    padding-inline-end: 0;
    }

:where(
    th, td
        ):not(:where(
        [class~="cnt-undo"], [class~="cnt-undo"] *,
        [class~="highlight"] *)
    ) {
    text-align: start;
    }


/* ----- cancelling first/last margin ----- */

> :where(
    :first-child
        ):not(:where(
        [class~="cnt-undo"], [class~="cnt-undo"] *)
    ) {
    margin-top: 0;
    }

> :where(
    :last-child
        ):not(:where(
        [class~="cnt-undo"], [class~="cnt-undo"] *)
    ) {
    margin-bottom: 0;
    }
